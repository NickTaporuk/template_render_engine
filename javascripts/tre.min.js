/* The MIT License (MIT) Copyright (c) 2013 went.out */
var render=function(){var p={upper:function(b){return b.toUpperCase()},lower:function(b){return b.toLowerCase()},escape:function(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},trim:function(){return String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^\s+|\s+$/g,"")}}(),capitalize:function(b){b=b.split(" ");for(var e=b.length,k=[],f=0;f<e;f++){var g=b[f];g[0]?k.push(g[0].toUpperCase()+g.slice(1)):
k.push("")}return k.join(" ")}},r=function(b,e){for(var k=e.split("."),f=k.length,g,l=0,a=0;a<f;a++){var d=k[a];g?g[d]&&(g=g[d],l++):b[d]&&(g=b[d],l++)}if(l==f)return g},t=function(b,e,k){var f="",g=/\{\{\s*.+\s*\}\}/g,l=b.split(g);b=b.match(g);f+=l[0];if(b){for(var g=b.length,a=0;a<g;a++){var d=b[a],n=d.replace(/^\{\{\s*|\s*\}\}$/g,"").split(":"),c=n[0],h="";"."==c[0]?h=1<c.length?h+r(e,c.slice(1)):h+e:(c=r(e,c),"function"==typeof c?h+=c(k,e):c&&(h+=c));""==h&&-1<d.indexOf("default")&&(h=d.replace(/^[^]*\(\s*|\s*\)[^]*$/g,
""));d=n.length;if(1<d)for(c=1;c<d;c++){var m=n[c];p[m]&&(h=p[m](h))}f+=h}0<g&&(f+=l[g])}return f},q=function(b,e,k,f){for(var g=b.length,l=0;l<g;l++){var a=b[l];if(a.cnt){var d=a.cnt;a.sub&&(d=k||a.cnt);switch(Object.prototype.toString.call(d)){case "[object Array]":for(var n=d.length,c=0;c<n;c++)e.push([a.be4e,d[c]]),q(a.nest,e,d[c],f);break;case "[object Object]":for(c in d)d.hasOwnProperty(c)&&(e.push([a.be4e,d[c]]),q(a.nest,e,d[c],f));break;default:if("function"==typeof d){e.push([a.be4e,h]);
var h=d(a,f,b,e,k);void 0!==h&&q(a.nest,e,h,f)}else e.push([a.be4e,d]),q(a.nest,e,void 0,f)}e.push([a.af3e.str,a.af3e.cnt])}}};return function(b,e){b=b.replace(/\{#[^]*#\}/g,"");var k=/\{\%\s*[a-zA-Z0-9._/:-]+\s*\%\}/g,f=b.split(k),k=b.match(k),g=[[f[0],e]],l=[],a=[],d="";if(k){for(var n=k.length,c=0;c<n;c++){var h=k[c].replace(/^\{\%\s*|\s*\%\}$/g,""),m=a.length;if("/"===h)a[m-1].af3e={cnt:a[m-2]?a[m-2].cnt:e,str:f[c+1]},a.pop();else{var s=e,p=!1;"."===h?(p=!0,s=0<m?a[m-1].cnt:e):s=r(e,h);h={cnt:s,
sub:p,nest:[],be4e:f[c+1],af3e:{cnt:null,str:""}};0==m?(l.push(h),a.push(h)):(a[m-1].nest.push(h),a.push(a[m-1].nest[a[m-1].nest.length-1]))}}q(l,g,void 0,e);n=g.length;for(c=0;c<n;c++)d+=t(g[c][0],g[c][1],e)}else d+=t(b,e,e);return d}}();